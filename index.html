<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Elif Ba - Tavşanı Havuca Ulaştır</title>
<style>
html,body {height:100%;margin:0;background:#c6f7d9;font-family:'Amiri',serif;}
.game-wrap {max-width:900px;margin:12px auto;height:calc(100vh - 24px);position:relative;}
.farm {width:100%;height:100%;position:relative;border-radius:12px;overflow:hidden;box-shadow:0 8px 24px rgba(0,0,0,.15);background:url('farm.jpg') center/cover no-repeat;}
.word-panel {position:absolute;left:50%;transform:translateX(-50%);top:15%;background:rgba(255,255,255,0.6);backdrop-filter:blur(4px);padding:10px 16px;border-radius:12px;display:flex;align-items:center;justify-content:center;z-index:10;max-width:90%;}
.rabbit {position:absolute;left:8%;bottom:10%;width:140px;transition:left 0.6s ease,bottom 0.3s ease;z-index:5}
.carrot {position:absolute;left:78%;bottom:8%;width:65px;transition:none;z-index:5}
.status-panel {position:absolute;top:10px;left:50%;transform:translateX(-50%);z-index:10;font-size:18px;color:#333;font-weight:600;}
.controls {position:absolute;bottom:60px;left:50%;transform:translateX(-50%);}
button {padding:12px 18px;border-radius:10px;border:0;background:#DB823B;color:white;font-weight:600;cursor:pointer;font-size:16px;}
button[disabled] {opacity:.5;}
#confetti {position:absolute;pointer-events:none;left:0;top:0;width:100%;height:100%;z-index:20}
#infoModal {position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;z-index:30;}
#infoContent {background:white;padding:20px 30px;border-radius:12px;max-width:400px;text-align:center;}
#infoContent button {margin-top:12px;background:#2b8a3e;color:white;padding:10px 16px;border-radius:8px;border:0;cursor:pointer;font-size:16px;}
@media (max-width:900px){
  .word-panel{top:12%;padding:8px}
  .rabbit{width:120px}
  .carrot{width:50px}
  button{padding:10px 14px;font-size:14px}
}
@media (max-width:600px){
  .word-panel{top:10%;padding:6px}
  .rabbit{width:100px;bottom:8%}
  .carrot{width:40px;bottom:6%}
  button{padding:8px 12px;font-size:13px}
}
</style>
</head>
<body>

<div id="infoModal">
  <div id="infoContent">
    <h2>Elif Ba Oyunu</h2>
    <p>Bu oyun, öğrencilerin Arapça harf ve kelimeleri öğrenmesini eğlenceli hale getirir.<br>
       Her kelimeyi doğru okuduğunuzda tavşan havuca doğru zıplar.<br>
       Oyunu öğretmen kontrolünde "Sonraki" butonuna basarak oynayabilirsiniz.</p>
    <button id="startBtn">Oyuna Başla</button>
  </div>
</div>

<div class="game-wrap">
  <div class="status-panel" id="statusPanel">1 / 14</div>
  <div class="farm" id="farm">
    <div class="word-panel" id="wordPanel"></div>
    <img id="rabbit" class="rabbit" src="rabbit.png" alt="tavşan">
    <img id="rabbit2" class="rabbit" src="rabbit2.png" alt="tavşan 2" style="display:none;">
    <img id="carrot" class="carrot" src="carrot.png" alt="havuç">
    <canvas id="confetti"></canvas>
  </div>
  <div class="controls">
    <button id="nextBtn">SONRAKİ</button>
  </div>
</div>

<audio id="hopSound" src="hop.mp3"></audio>
<audio id="applauseSound" src="applause.mp3"></audio>

<script>
const totalWords = 14;
let idx = 0;
const wordPanel = document.getElementById('wordPanel');
const nextBtn = document.getElementById('nextBtn');
const statusPanel = document.getElementById('statusPanel');
const rabbit = document.getElementById('rabbit');
const rabbit2 = document.getElementById('rabbit2');
const carrot = document.getElementById('carrot');
const confettiCanvas = document.getElementById('confetti');
const hopSound = document.getElementById('hopSound');
const applauseSound = document.getElementById('applauseSound');

function resizeCanvas(){confettiCanvas.width=confettiCanvas.clientWidth;confettiCanvas.height=confettiCanvas.clientHeight;}
window.addEventListener('resize',resizeCanvas);resizeCanvas();

function setWord(i){
  statusPanel.textContent = `${i+1} / ${totalWords}`;
  wordPanel.innerHTML = '';
  const img = document.createElement('img');
  let filename = i < 9 ? `words/0${i+1}.png` : `words/${i+1}.png`;
  img.src = filename;
  img.alt = `Kelime ${i+1}`;
  // --- Görsel boyutu ve ortalama ---
  img.style.width = '90%';
  img.style.height = 'auto';
  img.style.display = 'block';
  img.style.margin = '0 auto';
  wordPanel.appendChild(img);
}

function rabbitJumpToCarrot(step, callback){
  hopSound.currentTime = 0;
  hopSound.play().catch(e=>{});
  const rabbitLeft = 8 + (65-8)*(step/totalWords);
  const rabbitBottom = 10 + (12-10)*(step/totalWords);
  rabbit.style.left = rabbitLeft + '%';
  rabbit.style.bottom = (rabbitBottom + 5) + '%';
  setTimeout(()=>{
    rabbit.style.bottom = rabbitBottom + '%';
    if(callback) callback();
  },300);
}

function launchConfetti(){
  const ctx=confettiCanvas.getContext('2d');
  const w=confettiCanvas.width; const h=confettiCanvas.height;
  const pieces=[];
  for(let i=0;i<120;i++){pieces.push({x:Math.random()*w,y:Math.random()*-h,w:6+Math.random()*8,h:8+Math.random()*12,vy:2+Math.random()*5,rv:Math.random()*6-3,angle:Math.random()*360})}
  let t=0;
  const id=setInterval(()=>{
    t++;
    ctx.clearRect(0,0,w,h);
    pieces.forEach(p=>{
      p.y+=p.vy; p.x+=Math.sin((t+p.x)/20); p.angle+=p.rv;
      ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.angle*Math.PI/180);
      ctx.fillStyle=`hsl(${(p.x/p.w)%360},70%,60%)`;
      ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h); ctx.restore();
    });
    if(t>160){clearInterval(id);ctx.clearRect(0,0,w,h);}
  },16);
}

function showCongrats(){
  const congrats = document.createElement('div');
  congrats.textContent = "Tebrikler! Tavşan havuca ulaştı, harika iş çıkardın!";
  congrats.style.position = 'absolute';
  congrats.style.left = '50%';
  congrats.style.bottom = '60%';
  congrats.style.transform = 'translateX(-50%)';
  congrats.style.background = 'rgba(255,255,255,0.8)';
  congrats.style.padding = '12px 18px';
  congrats.style.borderRadius = '10px';
  congrats.style.fontSize = '20px';
  congrats.style.textAlign = 'center';
  congrats.style.zIndex = 25;
  congrats.style.color = '#2b8a3e';
  document.getElementById('farm').appendChild(congrats);

  applauseSound.currentTime = 0;
  applauseSound.play().catch(e=>{});

  rabbit.style.display = 'none';
  rabbit2.style.display = 'block';
  rabbit2.style.left = rabbit.style.left;
  rabbit2.style.bottom = rabbit.style.bottom;
}

setWord(idx);

nextBtn.addEventListener('click',()=>{
  rabbitJumpToCarrot(idx, ()=>{
    idx++;
    if(idx < totalWords){
      setWord(idx);
    } else {
      launchConfetti();
      showCongrats();
      nextBtn.disabled = true;
    }
  });
});

document.getElementById('startBtn').addEventListener('click',()=>{
  document.getElementById('infoModal').style.display = 'none';
});
</script>

</body>
</html>





